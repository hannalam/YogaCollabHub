{% extends 'users/base.html' %} {% block body %}
<head>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<div class="row justify-content-center my-4"> <!-- Creating a row with centered content -->
  <div class="col-md-7 mt-4"> <!-- Creating a column with medium size -->
    <div class="card"> <!-- Creating a card -->
      <h1 class="card-header text-center">Ai Chatbot</h1> 
      <div class="card-body">
        <div class="d-flex justify-content-end">  <!-- Creating a flex container with end alignment -->
          <button 
            type="button"
            class="btn btn-primary mb-3" 
            onclick="location.href=''"
          >
            New Chat + <!-- Button to start a new chat -->
          </button> 
        </div>
        <!-- Chat history -->
        <div class="chat-history mb-3">
          {% for message in messages %}
          <div
            class="card mb-2 {% if message.role == 'assistant' %}bg-success text-white{% endif %}"
          >
            <div class="card-body p-2">
              <strong>{{ message.role|title }}:</strong> {{ message.content}}
            </div>
          </div>
          {% endfor %}
        </div>
        <form action="." method="POST">
          <!-- this secures the form from malicious attacks during submission -->
          {% csrf_token %}

          <label for="temperature" class="form-label"></label> <!-- Label for temperature input -->
            <strong> Temperature:</strong>   </label
          >
            
          <input
            class="form-control mb-2"
            type="number"
            step="0.01"
            min="0"
            max="2"
            name="temperature"
            value="{{ temperature }}"
            id="temperature"
          />
          <!-- Temperature range -->
          <div class="mx-2 m-3"> 0.0 👈 More conservative 🗯️ </div>
            <div class="mx-2 m-3"> 1.0 👈 More diverse 🗯️</div>
          <input
          class="form-control mb-2"
          required
          type="text"
          autofocus="autofocus"
          name="prompt"
          value="{{ prompt }}"
          id=""
        />
        <!-- Submit button -->
          <button class="btn btn-success fw-bold" type="submit">
            GENERATE
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
